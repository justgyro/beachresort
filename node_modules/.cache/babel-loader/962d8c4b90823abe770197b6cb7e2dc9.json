{"ast":null,"code":"import _objectSpread from\"/Users/Justgyro/github/resort/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/Justgyro/github/resort/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/Justgyro/github/resort/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/Justgyro/github/resort/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/Justgyro/github/resort/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Justgyro/github/resort/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Justgyro/github/resort/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Justgyro/github/resort/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Justgyro/github/resort/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';//import items from './data';\nimport Client from'./Contentful';var RoomContext=React.createContext();//RoomContext.Provider value={}\nvar RoomProvider=/*#__PURE__*/function(_Component){_inherits(RoomProvider,_Component);function RoomProvider(){var _getPrototypeOf2;var _this;_classCallCheck(this,RoomProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RoomProvider)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={rooms:[],sortedRooms:[],featuredRooms:[],loading:true,type:'all',capacity:1,price:0,minPrice:0,maxPrice:0,minSize:0,maxSize:0,breakfast:false,pets:false};_this.getData=function _callee(){var response,rooms,featuredRooms,maxPrice,maxSize;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(Client.getEntries({content_type:\"beachResortRoomExample\",order:\"sys.createdAt\"}));case 3:response=_context.sent;rooms=_this.formatData(response.items);featuredRooms=rooms.filter(function(room){return room.featured===true;});maxPrice=Math.max.apply(Math,_toConsumableArray(rooms.map(function(item){return item.price;})));maxSize=Math.max.apply(Math,_toConsumableArray(rooms.map(function(item){return item.size;})));_this.setState({rooms:rooms,featuredRooms:featuredRooms,sortedRooms:rooms,loading:false,price:maxPrice,maxPrice:maxPrice,maxSize:maxSize});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},null,null,[[0,11]]);};_this.getRoom=function(slug){var tempRooms=_toConsumableArray(_this.state.rooms);var room=tempRooms.find(function(room){return room.slug===slug;});return room;};_this.handleChange=function(event){var target=event.target;var value=target.type==='checkbox'?target.checked:target.value;var name=event.target.name;_this.setState(_defineProperty({},name,value),_this.filterRooms);};_this.filterRooms=function(){var _this$state=_this.state,rooms=_this$state.rooms,type=_this$state.type,capacity=_this$state.capacity,price=_this$state.price,minSize=_this$state.minSize,maxSize=_this$state.maxSize,breakfast=_this$state.breakfast,pets=_this$state.pets;// all the rooms\nvar tempRooms=_toConsumableArray(rooms);//transform values\ncapacity=parseInt(capacity);price=parseInt(price);//filter by capacity\nif(capacity!==1){tempRooms=tempRooms.filter(function(room){return room.capacity>=capacity;});}//filter by room type\nif(type!=='all'){tempRooms=tempRooms.filter(function(room){return room.type===type;});}//filter by price\ntempRooms=tempRooms.filter(function(room){return room.price<=price;});// filter by size\ntempRooms=tempRooms.filter(function(room){return room.size>=minSize&&room.size<=maxSize;});//filer by breakfast\nif(breakfast){tempRooms=tempRooms.filter(function(room){return room.breakfast===true;});}//filer by pets\nif(pets){tempRooms=tempRooms.filter(function(room){return room.pets===true;});}// change state\n_this.setState({sortedRooms:tempRooms});};return _this;}_createClass(RoomProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"formatData\",value:function formatData(items){var tempItems=items.map(function(item){var id=item.sys.id;var images=item.fields.images.map(function(image){return image.fields.file.url;});var room=_objectSpread({},item.fields,{images:images,id:id});return room;});return tempItems;}},{key:\"render\",value:function render(){return React.createElement(RoomContext.Provider,{value:_objectSpread({},this.state,{getRoom:this.getRoom,handleChange:this.handleChange})},this.props.children);}}]);return RoomProvider;}(Component);var RoomConsumer=RoomContext.Consumer;export function withRoomConsumer(Component){return function ConsumerWrapper(props){return React.createElement(RoomConsumer,null,function(value){return React.createElement(Component,Object.assign({},props,{context:value}));});};}export{RoomProvider,RoomConsumer,RoomContext};","map":{"version":3,"sources":["/Users/Justgyro/github/resort/src/Context.js"],"names":["React","Component","Client","RoomContext","createContext","RoomProvider","state","rooms","sortedRooms","featuredRooms","loading","type","capacity","price","minPrice","maxPrice","minSize","maxSize","breakfast","pets","getData","getEntries","content_type","order","response","formatData","items","filter","room","featured","Math","max","map","item","size","setState","console","log","getRoom","slug","tempRooms","find","handleChange","event","target","value","checked","name","filterRooms","parseInt","tempItems","id","sys","images","fields","image","file","url","props","children","RoomConsumer","Consumer","withRoomConsumer","ConsumerWrapper"],"mappings":"8/BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA;AACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CAGA,GAAMC,CAAAA,WAAW,CAAGH,KAAK,CAACI,aAAN,EAApB,CACA;GACMC,CAAAA,Y,uZACJC,K,CAAM,CACJC,KAAK,CAAE,EADH,CAEJC,WAAW,CAAE,EAFT,CAGJC,aAAa,CAAC,EAHV,CAIJC,OAAO,CAAE,IAJL,CAKJC,IAAI,CAAE,KALF,CAMJC,QAAQ,CAAE,CANN,CAOJC,KAAK,CAAE,CAPH,CAQJC,QAAQ,CAAE,CARN,CASJC,QAAQ,CAAE,CATN,CAUJC,OAAO,CAAE,CAVL,CAWJC,OAAO,CAAE,CAXL,CAYJC,SAAS,CAAE,KAZP,CAaJC,IAAI,CAAE,KAbF,C,OAiBRC,O,CAAU,uPAEelB,MAAM,CAACmB,UAAP,CAAkB,CACrCC,YAAY,CAAE,wBADuB,CAErCC,KAAK,CAAC,eAF+B,CAAlB,CAFf,SAEFC,QAFE,eAMNjB,KANM,CAME,MAAKkB,UAAL,CAAgBD,QAAQ,CAACE,KAAzB,CANF,CAONjB,aAPM,CAOUF,KAAK,CAACoB,MAAN,CAAa,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,QAAL,GAAkB,IAAtB,EAAjB,CAPV,CAQNd,QARM,CAQKe,IAAI,CAACC,GAAL,OAAAD,IAAI,oBAAQvB,KAAK,CAACyB,GAAN,CAAU,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACpB,KAAT,EAAd,CAAR,EART,CASNI,OATM,CASIa,IAAI,CAACC,GAAL,OAAAD,IAAI,oBAAQvB,KAAK,CAACyB,GAAN,CAAU,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,IAAT,EAAd,CAAR,EATR,CAWV,MAAKC,QAAL,CAAc,CACZ5B,KAAK,CAALA,KADY,CAEZE,aAAa,CAAbA,aAFY,CAGZD,WAAW,CAACD,KAHA,CAIZG,OAAO,CAAC,KAJI,CAKZG,KAAK,CAAEE,QALK,CAMZA,QAAQ,CAARA,QANY,CAOZE,OAAO,CAAPA,OAPY,CAAd,EAXU,iFAsBNmB,OAAO,CAACC,GAAR,cAtBM,kE,OAwCRC,O,CAAU,SAAAC,IAAI,CAAI,CAChB,GAAIC,CAAAA,SAAS,oBAAO,MAAKlC,KAAL,CAAWC,KAAlB,CAAb,CACA,GAAMqB,CAAAA,IAAI,CAAGY,SAAS,CAACC,IAAV,CAAe,SAAAb,IAAI,QAAIA,CAAAA,IAAI,CAACW,IAAL,GAAcA,IAAlB,EAAnB,CAAb,CACA,MAAOX,CAAAA,IAAP,CACD,C,OAEHc,Y,CAAe,SAAAC,KAAK,CAAI,CACtB,GAAMC,CAAAA,MAAM,CAAGD,KAAK,CAACC,MAArB,CACA,GAAMC,CAAAA,KAAK,CAAGD,MAAM,CAACjC,IAAP,GAAgB,UAAhB,CAA6BiC,MAAM,CAACE,OAApC,CAA8CF,MAAM,CAACC,KAAnE,CACA,GAAME,CAAAA,IAAI,CAAGJ,KAAK,CAACC,MAAN,CAAaG,IAA1B,CACA,MAAKZ,QAAL,oBACGY,IADH,CACUF,KADV,EAEG,MAAKG,WAFR,EAGD,C,OAEDA,W,CAAc,UAAK,iBAGb,MAAK1C,KAHQ,CAEfC,KAFe,aAEfA,KAFe,CAERI,IAFQ,aAERA,IAFQ,CAEFC,QAFE,aAEFA,QAFE,CAEQC,KAFR,aAEQA,KAFR,CAEeG,OAFf,aAEeA,OAFf,CAEwBC,OAFxB,aAEwBA,OAFxB,CAEiCC,SAFjC,aAEiCA,SAFjC,CAE4CC,IAF5C,aAE4CA,IAF5C,CAIjB;AACA,GAAIqB,CAAAA,SAAS,oBAAOjC,KAAP,CAAb,CAEA;AACFK,QAAQ,CAAGqC,QAAQ,CAACrC,QAAD,CAAnB,CACAC,KAAK,CAAGoC,QAAQ,CAACpC,KAAD,CAAhB,CAEA;AACE,GAAID,QAAQ,GAAK,CAAjB,CAAmB,CACjB4B,SAAS,CAAGA,SAAS,CAACb,MAAV,CAAiB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAAChB,QAAL,EAAiBA,QAArB,EAArB,CAAZ,CACD,CACD;AACA,GAAGD,IAAI,GAAK,KAAZ,CAAkB,CAChB6B,SAAS,CAAGA,SAAS,CAACb,MAAV,CAAiB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACjB,IAAL,GAAcA,IAAlB,EAArB,CAAZ,CACD,CACD;AACF6B,SAAS,CAAGA,SAAS,CAACb,MAAV,CAAiB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACf,KAAL,EAAcA,KAAlB,EAArB,CAAZ,CACA;AACA2B,SAAS,CAAGA,SAAS,CAACb,MAAV,CAAiB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACM,IAAL,EAAalB,OAAb,EAAwBY,IAAI,CAACM,IAAL,EAAajB,OAAzC,EAArB,CAAZ,CACA;AACA,GAAGC,SAAH,CAAa,CACXsB,SAAS,CAAGA,SAAS,CAACb,MAAV,CAAiB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACV,SAAL,GAAmB,IAAvB,EAArB,CAAZ,CACD,CAED;AACA,GAAGC,IAAH,CAAQ,CACNqB,SAAS,CAAGA,SAAS,CAACb,MAAV,CAAiB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACT,IAAL,GAAc,IAAlB,EAArB,CAAZ,CACD,CAEC;AACA,MAAKgB,QAAL,CAAc,CACZ3B,WAAW,CAAEgC,SADD,CAAd,EAGD,C,qGAnEoB,CACjB,KAAKpB,OAAL,GACD,C,8CAEUM,K,CAAM,CACf,GAAIwB,CAAAA,SAAS,CAAGxB,KAAK,CAACM,GAAN,CAAU,SAAAC,IAAI,CAAI,CAChC,GAAIkB,CAAAA,EAAE,CAAGlB,IAAI,CAACmB,GAAL,CAASD,EAAlB,CACA,GAAIE,CAAAA,MAAM,CAAGpB,IAAI,CAACqB,MAAL,CAAYD,MAAZ,CAAmBrB,GAAnB,CAAuB,SAAAuB,KAAK,QAAIA,CAAAA,KAAK,CAACD,MAAN,CAAaE,IAAb,CAAkBC,GAAtB,EAA5B,CAAb,CAEA,GAAI7B,CAAAA,IAAI,kBAAOK,IAAI,CAACqB,MAAZ,EAAmBD,MAAM,CAANA,MAAnB,CAA0BF,EAAE,CAAFA,EAA1B,EAAR,CACA,MAAOvB,CAAAA,IAAP,CACD,CANe,CAAhB,CAOA,MAAOsB,CAAAA,SAAP,CACD,C,uCAuDQ,CACP,MACE,qBAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,kBAAM,KAAK5C,KAAX,EAAkBgC,OAAO,CAAE,KAAKA,OAAhC,CAAyCI,YAAY,CAAE,KAAKA,YAA5D,EAA3B,EACG,KAAKgB,KAAL,CAAWC,QADd,CADF,CAMD,C,0BAtHwB1D,S,EAyH3B,GAAM2D,CAAAA,YAAY,CAAGzD,WAAW,CAAC0D,QAAjC,CAEA,MAAO,SAASC,CAAAA,gBAAT,CAA0B7D,SAA1B,CAAqC,CAC1C,MAAO,SAAS8D,CAAAA,eAAT,CAAyBL,KAAzB,CAAgC,CACrC,MACE,qBAAC,YAAD,MACG,SAAAb,KAAK,QAAI,qBAAC,SAAD,kBAAea,KAAf,EAAsB,OAAO,CAAEb,KAA/B,GAAJ,EADR,CADF,CAIA,CALF,CAMD,CAED,OAASxC,YAAT,CAAuBuD,YAAvB,CAAqCzD,WAArC","sourcesContent":["import React, { Component } from 'react';\n//import items from './data';\nimport Client from './Contentful';\n\n\nconst RoomContext = React.createContext();\n//RoomContext.Provider value={}\nclass RoomProvider extends Component {\n  state={\n    rooms: [],\n    sortedRooms: [],\n    featuredRooms:[],\n    loading: true,\n    type: 'all',\n    capacity: 1,\n    price: 0,\n    minPrice: 0,\n    maxPrice: 0,\n    minSize: 0,\n    maxSize: 0,\n    breakfast: false,\n    pets: false\n  };\n\n  //getData {}\ngetData = async () =>{\n  try {\n    let response = await Client.getEntries({\n      content_type: \"beachResortRoomExample\",\n      order:\"sys.createdAt\"\n    });\nlet rooms = this.formatData(response.items)\nlet featuredRooms = rooms.filter(room => room.featured === true);\nlet maxPrice = Math.max(...rooms.map(item => item.price));\nlet maxSize = Math.max(...rooms.map(item => item.size));\n\nthis.setState({\n  rooms,\n  featuredRooms,\n  sortedRooms:rooms,\n  loading:false,\n  price: maxPrice,\n  maxPrice,\n  maxSize\n});\n\n  } catch (error) {\n    console.log(error)\n  }\n}\n  componentDidMount(){\n    this.getData()\n  }\n\n  formatData(items){\n    let tempItems = items.map(item => {\n      let id = item.sys.id\n      let images = item.fields.images.map(image => image.fields.file.url);\n\n      let room = {...item.fields,images,id}\n      return room;\n    });\n    return tempItems;\n  }\n\n  getRoom = slug => {\n    let tempRooms = [...this.state.rooms];\n    const room = tempRooms.find(room => room.slug === slug);\n    return room;\n  };\n\nhandleChange = event => {\n  const target = event.target;\n  const value = target.type === 'checkbox' ? target.checked : target.value\n  const name = event.target.name;\n  this.setState({\n    [name]: value\n  }, this.filterRooms)\n}\n\nfilterRooms = ()=> {\n  let {\n    rooms, type, capacity, price, minSize, maxSize, breakfast, pets\n  } = this.state\n  // all the rooms\n  let tempRooms = [...rooms];\n\n  //transform values\ncapacity = parseInt(capacity)\nprice = parseInt(price)\n\n//filter by capacity\n  if (capacity !== 1){\n    tempRooms = tempRooms.filter(room => room.capacity >= capacity)\n  }\n  //filter by room type\n  if(type !== 'all'){\n    tempRooms = tempRooms.filter(room => room.type === type)\n  }\n  //filter by price\ntempRooms = tempRooms.filter(room => room.price <= price);\n// filter by size\ntempRooms = tempRooms.filter(room => room.size >= minSize && room.size <= maxSize)\n//filer by breakfast\nif(breakfast){\n  tempRooms = tempRooms.filter(room => room.breakfast === true)\n}\n\n//filer by pets\nif(pets){\n  tempRooms = tempRooms.filter(room => room.pets === true)\n}\n\n  // change state\n  this.setState({\n    sortedRooms: tempRooms\n  })\n}\n  render() {\n    return (\n      <RoomContext.Provider value={{...this.state, getRoom: this.getRoom, handleChange: this.handleChange}}>\n        {this.props.children}\n      </RoomContext.Provider>\n\n    )\n  }\n}\n\nconst RoomConsumer = RoomContext.Consumer;\n\nexport function withRoomConsumer(Component) {\n  return function ConsumerWrapper(props) {\n    return (\n      <RoomConsumer>\n        {value => <Component {...props} context={value}/>}\n      </RoomConsumer>\n  )}\n}\n\nexport { RoomProvider, RoomConsumer, RoomContext }\n"]},"metadata":{},"sourceType":"module"}